<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="PqrEditDlg"  style="width:10%" widgetVar="PqrEditDialog" modal="true" resizable="false" 
                  appendTo="@(body)" header="#{bundle.EditPqrTitle}">
            <h:form id="PqrEditForm"> 
                <h:panelGroup id="display">
                    <p:panelGrid style="width:96%" columns="6" rendered="#{pqrController.selected != null}">
                        <p:outputLabel value="#{bundle.CreatePqrLabel_fechaCreacion}" for="fechaCreacion" />
                        <p:inputText style="width:60%" readonly="true" id="fechaCreacion"  
                                       value="#{pqrController.selected.fechaCreacion}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputText>
                        
                        <p:outputLabel value="#{bundle.CreatePqrLabel_idTipoPqr}" for="idTipoPqr" />
                        <p:inputText readonly="true" style="width:100%" id="idTipoPqr" value="#{pqrController.selected.idTipoPqr.nombre}" />
                        
                        <p:outputLabel value="#{bundle.CreatePqrLabel_estado}" for="estado" />
                        <p:selectOneMenu id="estado" value="#{pqrController.selected.estado}">
                        <f:selectItem itemLabel="Registrado" itemValue="Registrado" />
                        <f:selectItem itemLabel="Aprobada" itemValue="Aprobada" />
                        <f:selectItem itemLabel="En Proceso" itemValue="En Proceso" />
                        <f:selectItem itemLabel="Rechazada" itemValue="Rechazada" />
                        <f:selectItem itemLabel="Solucionado" itemValue="Solucionado" />
                        <f:selectItem itemLabel="Detenido" itemValue="Detenido" />
                         <f:selectItem itemLabel="Cerrada" itemValue="Cerrada" />
                        </p:selectOneMenu>                                                     
                    </p:panelGrid>
                    <p:spacer height="1" />
                    <p:panelGrid  style="width:96%" columns="2">
                              <p:outputLabel value="Asunto:  " for="asunto" />
                               <p:inputText readonly="true" style="width:95%" id="asunto"  value="#{pqrController.selected.asunto}"/> 

                              <p:outputLabel value="Descripcion:  " for="descripcion" />
                              <p:inputTextarea readonly="true" style="width:95%"  id="descripcion" value="#{pqrController.selected.descripcion}" />
                    </p:panelGrid>
                    <p:spacer height="1" />
                    <p:panelGrid style="width:96%" columns="4" rendered="#{pqrController.selected != null}">                           
                        <p:outputLabel value="#{bundle.CreatePqrLabel_idNivel2}" for="idNivel2" />
                        <p:inputText style="width:90%" readonly="true"  id="idNivel2" value="#{pqrController.selected.idNivel2.idNivel1.idTipo.nombre.concat(' ')
                                                                                   .concat(pqrController.selected.idNivel2.idNivel1.referencia).concat(' ')
                                                                                   .concat(pqrController.selected.idNivel2.idTipo.nombre).concat(' ')
                                                                                   .concat(pqrController.selected.idNivel2.referencia)}" />
                        <p:outputLabel value="#{bundle.CreatePqrLabel_idNivel3}" for="idNivel3" />
                        <p:inputText style="width:90%" readonly="true"  id="idNivel3" value="#{pqrController.selected.idNivel3.idTipo.nombre.concat(' ')
                                                        .concat(pqrController.selected.idNivel3.referencia)}" />                        
                        <p:outputLabel value="#{bundle.CreatePqrLabel_idTercero}" for="idTercero" />
                        <p:inputText style="width:90%" readonly="true"  id="idTercero" value="#{pqrController.selected.idTercero.nombre}" />                            
                        <p:outputLabel value="#{bundle.CreatePqrLabel_idUsuario}" for="idUsuario" />
                        <p:inputText style="width:90%" readonly="true" id="idUsuario" value="#{pqrController.selected.idUsuario.nombres.concat(' ')
                                                        .concat(pqrController.selected.idUsuario.apellidos)}" />
                        <p:commandButton actionListener="#{pqrController.prepareCreateSegumientoPQR()}"
                                         value="Editar" oncomplete="PF('SeguimientoAdmPqrCreateDialog').show()"/>
                    </p:panelGrid> 
                
                        
            <p:spacer height="3" />
            <table style="width:50%" border="0">                  
                    <p:dataTable id="datalist" value="#{seguimientoAdmPqrController.items}" var="item"
                                 selectionMode="single" selection="#{seguimientoAdmPqrController.selected}"
                                 paginator="true" paginatorPosition="bottom"
                                 rowKey="#{item.id}"
                                 rows="10"
                                 rowsPerPageTemplate="10,20,30,40,50"
                                 >

                        <p:column style="width:90%">
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListSeguimientoAdmPqrTitle_descripcion}"/>
                            </f:facet>
                            <h:outputText value="#{item.descripcion}"/>
                        </p:column>
                        <p:column style="width:60%">
                            <f:facet name="header">
                                <h:outputText value="fecha Ejecucion "/>
                            </f:facet>
                            <h:outputText value="#{item.fechaEjecucion}">
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                            
                        </p:column>
                    </p:dataTable>
               </table>
            </h:panelGroup>
</h:form>
        </p:dialog>
           <ui:include src="Create_segumientoAdmin.xhtml"/>
    </ui:composition>
</html>
